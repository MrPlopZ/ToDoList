<h1>Lista de Tareas</h1>

<form (ngSubmit)="addTask()" #taskForm="ngForm">
  <input
    type="text"
    name="title"
    [(ngModel)]="newTask.title"
    placeholder="Título"
    required
  />

  <input
    type="text"
    name="description"
    [(ngModel)]="newTask.description"
    placeholder="Descripción"
  />

  <input
    type="date"
    name="dueDate"
    [(ngModel)]="newTask.dueDate"
    placeholder="Fecha límite"
  />

  <label>
    <input
      type="checkbox"
      name="isCompleted"
      [(ngModel)]="newTask.isCompleted"
    />
    ¿Completada?
  </label>

  <!-- Selector de categoría -->
  <select [(ngModel)]="newTask.categoryId" name="category" required>
    <option *ngFor="let category of categories" [ngValue]="category.id">
      {{ category.name }}
    </option>
  </select>

  <!-- Selector de proyecto -->
  <select [(ngModel)]="newTask.projectId" name="project" required>
    <option *ngFor="let project of projects" [ngValue]="project.id">
      {{ project.name }}
    </option>
  </select>

  <button type="submit" [disabled]="taskForm.invalid">Añadir</button>
</form>

<hr />

<h1>{{ title }}</h1>

<ul>
  <li *ngFor="let task of tasks">
    <strong>{{ task.title }}</strong>
    (<span>{{ task.categoryName || 'Sin categoría' }}</span>
    <span>{{ task.projectName || ' - Sin proyecto' }}</span>)
    <p>{{ task.description || 'Sin descripción' }}</p>
    <p>Completado: {{ task.isCompleted ? 'Sí' : 'No' }}</p>
    <button (click)="deleteTask(task.id)">Eliminar</button>
  </li>
</ul>