<h1>Task List</h1>

<form (ngSubmit)="addTask()" #taskForm="ngForm">
  <input
    type="text"
    name="title"
    [(ngModel)]="newTask.title"
    placeholder="Title"
    required
  />

  <input
    type="text"
    name="description"
    [(ngModel)]="newTask.description"
    placeholder="Description"
  />

  <input
    type="date"
    name="dueDate"
    [(ngModel)]="newTask.dueDate"
    placeholder="Due Date"
  />

  <label>
    <input
      type="checkbox"
      name="isCompleted"
      [(ngModel)]="newTask.isCompleted"
    />
    Completed?
  </label>

  <!-- Category selector -->
  <select [(ngModel)]="newTask.categoryId" name="category" required>
    <option *ngFor="let category of categories" [ngValue]="category.id">
      {{ category.name }}
    </option>
  </select>

  <!-- Project selector -->
  <select [(ngModel)]="newTask.projectId" name="project" required>
    <option *ngFor="let project of projects" [ngValue]="project.id">
      {{ project.name }}
    </option>
  </select>

  <button type="submit" [disabled]="taskForm.invalid">Add</button>
</form>

<hr />

<h1>{{ title }}</h1>

<ul>
  <li *ngFor="let task of tasks">
    <strong>{{ task.title }}</strong>
    (<span>{{ task.categoryName || 'No category' }}</span>
    <span>{{ task.projectName || ' - No project' }}</span>)
    <p>{{ task.description || 'No description' }}</p>
    <p>Completed: {{ task.isCompleted ? 'Yes' : 'No' }}</p>
    <button (click)="deleteTask(task.id)">Delete</button>
  </li>
</ul>
